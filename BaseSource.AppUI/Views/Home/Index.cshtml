@using BaseSource.ViewModels.Project;
@using System.Text.RegularExpressions;
@model List<PetProjectDto>
@{
    ViewData["Title"] = "Danh sách project";
}


<!-- ======= Portfolio Section ======= -->
<section id="portfolio" class="portfolio">
    <div class="container">

        <div class="section-title">
            <h2>Danh sách Project</h2>
            <p>Explore 50+ Beginner-Friendly Projects Built with HTML, CSS, and Vanilla JavaScript to Boost Your Web Development Skills</p>
        </div>




        <div class="row portfolio-container project_data" style=" height:unset !important ;position: unset !important">

            @foreach (var item in Model)
            {
                <div class="col-lg-4 col-md-6 portfolio-item filter-app wow fadeInUp" >
                    <div class="portfolio-wrap">
                        <figure>
                            <a href="/project/@item.Slug">  <img src="@item.Image" class="img-fluid" alt="" /></a>

                            @* <a href="portfolio-details.html" class="link-details" title="More Details"><i class="bx bx-link"></i></a>*@
                        </figure>

                        <div class="portfolio-info" style="text-align:unset !important; height:110px !important; text-transform: unset !important;padding:12px !important">
                            <h6><a href="/project/@item.Slug"> <b>@item.Name</b></a></h6>
                            <p>
                                @if (!string.IsNullOrEmpty(item.Description))
                                {
                                    var data = Regex.Replace(item.Description, "<.*?>", string.Empty);
                                    if (data.Length > 100)
                                    {
                                        data = $"{data.Substring(0, 99)}...";
                                    }
                                    <b style="color:black !important;text-transform: initial !important">@data</b>
                                }
                            </p>
                        </div>
                    </div>
                </div>
            }

        </div>
        @* <div class="row">
        <div class="col-lg-12">
        <ul id="portfolio-flters">
        <li data-filter="*" class="filter-active">Next</li>
        <li data-filter=".filter-app">1</li>
        <li data-filter=".filter-card">2</li>
        <li data-filter=".filter-web">3</li>
        </ul>
        </div>
        </div>*@


    </div>
</section><!-- End Portfolio Section -->
@section Scripts{

    <script>
        var pageIndex = 2;
        var isPeding = false;
        $(window).scroll(function () {
            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                if (pageIndex > 0 && !isPeding) {
                    isPeding = true;
                    // ajax call get data from server and append to the div
                    $.ajax({
                        url: `/getproject?page=${pageIndex}`,
                        type: 'GET',
                    }).done(function (response) {
                        isPeding = false;
                        if (response != null) {
                            $('.project_data').append(response);
                            pageIndex += 1;
                        }
                        else {
                            pageIndex = 0;
                        }
                      
                    });
                }

            }
        });

    </script>
}